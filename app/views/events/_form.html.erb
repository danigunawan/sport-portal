<%= form_for @event, as: :event, html: { class: "form-horizontal event" } do |f| %>

  <%= render "application/validation_errors", model: @event %>

  <%= f.hidden_field :type, value: @event.class.name %>
  <div class="form-group">
    <%= f.label :name, class: 'control-label col-lg-2' %>
    <div class="col-lg-10">
      <%= f.text_field :name, id: :event_name, class: 'form-control' %>
      <%= f.error_span(:name) %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :description, class: 'control-label col-lg-2' %>
    <div class="col-lg-10">
      <%= f.text_area :description, id: :event_description, class: 'form-control' %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :player_type, class: 'control-label col-lg-2' %>
    <div class="col-lg-10">
      <%= f.select(:player_type, Event.player_types.map {|k, v| [k.humanize, v]},
                   {include_blank: t('events.new.select_player_type')},
                   {class: 'form-control'}) %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :max_teams, class: 'control-label col-lg-2' %>
    <div class="col-lg-10">
      <%= f.text_field :max_teams, id: :event_max_teams, class: 'form-control' %>
      <%= f.error_span(:max_teams) %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :discipline, class: 'control-label col-lg-2' %>
    <div class="col-lg-10">
      <%= f.text_field :discipline, id: :event_discipline, class: 'form-control' %>
      <%= f.error_span(:discipline) %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :deadline, class: 'control-label col-lg-2' %>
    <div class="col-lg-10">
      <%= f.text_field :deadline, id: :event_deadline, class: 'form-control', data: { provide: 'datepicker', 'date-format': "yyyy-mm-dd" } %>
      <%= f.error_span(:deadline) %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :startdate, class: 'control-label col-lg-2' %>
    <div class="col-lg-10">
      <%= f.text_field :startdate, id: :event_startdate, class: 'form-control', data: { provide: 'datepicker', 'date-format': "yyyy-mm-dd" } %>
      <%= f.error_span(:startdate) %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :enddate, class: 'control-label col-lg-2' %>
    <div class="col-lg-10">
      <%= f.text_field :enddate, id: :event_enddate, class: 'form-control', data: { provide: 'datepicker', 'date-format': "yyyy-mm-dd" } %>
      <%= f.error_span(:enddate) %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :duration, class: 'control-label col-lg-2' %>
    <div class="col-lg-10">
      <%= f.text_field :duration, id: :event_duration, class: 'form-control' %></div>
  </div>
  <%# Rendering the correct template depending on the event type %>
  <%= render @event.class.name.downcase, f: f %>

  <div class="form-group">
    <div class="col-lg-offset-2 col-lg-10">
      <%= f.submit submit_label,
                   class: 'btn btn-primary' %>
      <%= link_to t('helpers.links.cancel'),
                  back_path,
                  class: 'btn btn-default' %>
    </div>
  </div>
<% end %>
